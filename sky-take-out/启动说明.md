# 苍穹外卖后端服务启动说明

## 快速启动

### 1. 确保环境准备
- Java 8+
- MySQL 5.5+
- Redis (任意版本)
- Maven 3.6+

### 2. 数据库配置
确保MySQL数据库运行，并且已经导入了 `sky_take_out.sql` 文件中的数据。

### 3. Redis配置
确保Redis服务运行在默认端口6379。

### 4. 启动后端服务

#### 方式一：使用IDE启动
1. 在IDE中打开项目
2. 找到 `sky-take-out/sky-server/src/main/java/com/sky/SkyApplication.java`
3. 右键运行或点击启动按钮

#### 方式二：使用命令行启动
```bash
cd sky-take-out
mvn clean compile
mvn spring-boot:run -pl sky-server
```

### 5. 验证启动成功

启动成功后，您应该看到：
```
server started
应用启动：初始化店铺状态为营业中
```

### 6. 测试API接口

打开浏览器访问：
- 店铺状态API: http://localhost:8072/user/shop/status
- 秒杀活动API: http://localhost:8072/user/seckill/activity/active

如果返回正常的JSON数据，说明后端服务启动成功。

### 7. 常见问题

#### 端口占用
如果8072端口被占用，可以修改 `application.yml` 中的端口配置。

#### 数据库连接失败
检查 `application-dev.yml` 中的数据库配置是否正确。

#### Redis连接失败
确保Redis服务正在运行，或修改Redis配置。

## 秒杀功能API接口

后端已经实现了以下秒杀API接口：

1. `GET /user/seckill/activity/active` - 获取进行中的秒杀活动
2. `GET /user/seckill/activity/{activityId}/goods` - 获取活动商品列表
3. `GET /user/seckill/goods/{goodsId}` - 获取商品详情
4. `POST /user/seckill/order/submit` - 提交秒杀订单
5. `PUT /user/seckill/order/payment` - 订单支付
6. `PUT /user/seckill/order/cancel/{orderId}` - 取消订单
7. `GET /user/seckill/check/eligibility` - 检查购买资格

所有接口都返回模拟数据，可以正常测试前端功能。

## 下一步

启动后端服务后，前端的秒杀横幅应该能够正常显示。如果仍有问题，请检查：

1. 后端服务是否正常启动
2. 前端请求的API地址是否正确
3. 网络连接是否正常
4. 浏览器控制台是否有其他错误信息

