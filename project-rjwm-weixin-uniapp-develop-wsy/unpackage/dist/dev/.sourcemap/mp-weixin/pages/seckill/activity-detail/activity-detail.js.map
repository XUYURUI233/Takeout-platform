{"version":3,"sources":["uni-app:///main.js","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?d7ff","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?f6ab","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?538e","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?4976","uni-app:///pages/seckill/activity-detail/activity-detail.vue","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?a592","webpack:///E:/project/project-rjwm-weixin-uniapp-develop-wsy/pages/seckill/activity-detail/activity-detail.vue?d285"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","components","navBar","data","activityId","activityInfo","goodsList","countdown","countdownTimer","loading","ht","computed","onLoad","onReady","onUnload","methods","getNavBarHeight","loadActivityDetail","console","activitiesRes","activity","description","startTime","endTime","loadGoodsList","res","getStockPercentage","canPurchase","now","goods","getBuyButtonText","handlePurchase","seckillGoodsId","quantity","eligibilityRes","uni","title","icon","goToGoodsDetail","url","calculateCountdown","hours","minutes","seconds","startCountdown","clearCountdown","clearInterval","formatTime","formatTimeUnit","goToPersonalCenter","goBack"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwI;AACxI;AACmE;AACL;AACsC;;;AAGpG;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAAurB,CAAgB,qrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACqH3sB;AAKA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EACAC,4BACA,2CACA;EACAC;IACA;MACA;MACA;IACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;;gBAEA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACA;kBACAC;oBAAA;kBAAA;kBACA;oBACA;oBACAF;kBACA;oBACAA;oBACA;kBACA;gBACA;kBACAA;kBACA;oBACAlB;oBACAqB;oBACAC;oBACAC;kBACA;gBACA;;gBAEA;gBAAA;gBAAA,OACA;cAAA;gBAEA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAL;gBACA;kBACAlB;kBACAqB;kBACAC;kBACAC;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAIA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAN;gBAAA;gBAAA,OACA;cAAA;gBAAAO;gBACAP;gBAEA;kBACA;kBACAA;gBACA;kBACAA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAIA;IACAQ;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MAEA,2BACAC,kBACAC,4BACAA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA,OAMA;kBACAC;kBACAC;gBACA;cAAA;gBAHAC;gBAAA,MAKAA;kBAAA;kBAAA;gBAAA;gBACAC;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAnB;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAoB;MACAH;QACAI;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;MACA;MAEA;MACA;MACA;MAEA;QAAAC;QAAAC;QAAAC;MAAA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACAd;QACAI;MACA;IACA;IAEA;IACAW;MACAf;QACAI;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjYA;AAAA;AAAA;AAAA;AAAszC,CAAgB,4uCAAG,EAAC,C;;;;;;;;;;;ACA10C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/seckill/activity-detail/activity-detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/seckill/activity-detail/activity-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./activity-detail.vue?vue&type=template&id=4dc51e74&scoped=true&\"\nvar renderjs\nimport script from \"./activity-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./activity-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./activity-detail.vue?vue&type=style&index=0&id=4dc51e74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dc51e74\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/seckill/activity-detail/activity-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity-detail.vue?vue&type=template&id=4dc51e74&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.formatTime(_vm.activityInfo.startTime)\n  var m1 = _vm.formatTime(_vm.activityInfo.endTime)\n  var m2 = _vm.countdown ? _vm.formatTimeUnit(_vm.countdown.hours) : null\n  var m3 = _vm.countdown ? _vm.formatTimeUnit(_vm.countdown.minutes) : null\n  var m4 = _vm.countdown ? _vm.formatTimeUnit(_vm.countdown.seconds) : null\n  var g0 = _vm.goodsList.length\n  var l0 = _vm.__map(_vm.goodsList, function (goods, __i0__) {\n    var $orig = _vm.__get_orig(goods)\n    var m5 = _vm.getStockPercentage(goods)\n    var m6 = _vm.canPurchase(goods)\n    var m7 = _vm.getBuyButtonText(goods)\n    return {\n      $orig: $orig,\n      m5: m5,\n      m6: m6,\n      m7: m7,\n    }\n  })\n  var g1 = _vm.goodsList.length === 0 && !_vm.loading\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        g0: g0,\n        l0: l0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity-detail.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"activity-detail-container\">\n    <!-- 导航栏 -->\n    <navBar :title=\"activityInfo.name || '秒杀活动'\"></navBar>\n    \n    <view class=\"content\" :style=\"{ paddingTop: ht + 'px' }\">\n      <!-- 活动信息头部 -->\n      <view class=\"activity-header\">\n        <image \n          :src=\"activityInfo.image || '/static/seckill-default.png'\" \n          class=\"activity-banner\"\n          mode=\"aspectFill\"\n        />\n        <view class=\"activity-overlay\">\n          <view class=\"activity-info\">\n            <text class=\"activity-title\">{{ activityInfo.name }}</text>\n            <text class=\"activity-desc\">{{ activityInfo.description }}</text>\n            <view class=\"activity-time\">\n              <text class=\"time-label\">活动时间：</text>\n              <text class=\"time-range\">\n                {{ formatTime(activityInfo.startTime) }} - {{ formatTime(activityInfo.endTime) }}\n              </text>\n            </view>\n          </view>\n          <view class=\"countdown-box\" v-if=\"countdown\">\n            <text class=\"countdown-label\">距离结束</text>\n            <view class=\"countdown-time\">\n              <text class=\"time-item\">{{ formatTimeUnit(countdown.hours) }}</text>\n              <text class=\"separator\">:</text>\n              <text class=\"time-item\">{{ formatTimeUnit(countdown.minutes) }}</text>\n              <text class=\"separator\">:</text>\n              <text class=\"time-item\">{{ formatTimeUnit(countdown.seconds) }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 商品列表 -->\n      <view class=\"goods-section\">\n        <view class=\"section-title\">\n          <text class=\"title-text\">秒杀商品</text>\n          <text class=\"goods-count\">共{{ goodsList.length }}件商品</text>\n        </view>\n        \n        <view class=\"goods-list\">\n          <view \n            class=\"goods-item\" \n            v-for=\"goods in goodsList\" \n            :key=\"goods.id\"\n            @tap=\"goToGoodsDetail(goods)\"\n          >\n            <image :src=\"goods.goodsImage\" class=\"goods-image\" mode=\"aspectFill\" />\n            <view class=\"goods-info\">\n              <text class=\"goods-name\">{{ goods.goodsName }}</text>\n              <view class=\"price-info\">\n                <text class=\"seckill-price\">￥{{ goods.seckillPrice }}</text>\n                <text class=\"original-price\">￥{{ goods.originalPrice }}</text>\n              </view>\n              <view class=\"stock-info\">\n                <text class=\"stock-text\">剩余{{ goods.availableStock }}件</text>\n                <view class=\"progress-bar\">\n                  <view \n                    class=\"progress-fill\" \n                    :style=\"{ width: getStockPercentage(goods) + '%' }\"\n                  ></view>\n                </view>\n              </view>\n              <view class=\"limit-info\">\n                <text class=\"limit-text\">限购{{ goods.limitCount }}件</text>\n                <text class=\"sold-text\">已售{{ goods.soldCount }}件</text>\n              </view>\n            </view>\n            <view class=\"goods-action\">\n              <view \n                class=\"buy-btn\" \n                :class=\"{ 'disabled': !canPurchase(goods) }\"\n                @tap.stop=\"handlePurchase(goods)\"\n              >\n                {{ getBuyButtonText(goods) }}\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 空状态 -->\n      <view class=\"empty-state\" v-if=\"goodsList.length === 0 && !loading\">\n        <image src=\"/static/empty.png\" class=\"empty-icon\" />\n        <text class=\"empty-text\">暂无秒杀商品</text>\n      </view>\n\n      <!-- 加载状态 -->\n      <view class=\"loading-state\" v-if=\"loading\">\n        <image src=\"/static/loading.gif\" class=\"loading-icon\" />\n        <text class=\"loading-text\">加载中...</text>\n      </view>\n\n      <!-- 操作按钮区域 -->\n      <view class=\"action-buttons-section\">\n        <!-- 个人中心按钮 -->\n        <view class=\"personal-center-button\" @tap=\"goToPersonalCenter\">\n          <image class=\"button-icon\" src=\"/static/center.png\" mode=\"aspectFit\"></image>\n          <text class=\"button-text\">个人中心</text>\n        </view>\n        \n        <!-- 返回按钮 -->\n        <view class=\"back-button\" @tap=\"goBack\">\n          <image class=\"button-icon\" src=\"/static/btn_back.png\" mode=\"aspectFit\"></image>\n          <text class=\"button-text\">返回主页</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport navBar from \"../../common/Navbar/navbar.vue\"\nimport { \n  getSeckillGoodsByActivityId,\n  checkSeckillEligibility,\n  getActiveSeckillActivities\n} from \"../../api/api.js\"\nimport { mapState } from \"vuex\"\n\nexport default {\n  name: 'SeckillActivityDetail',\n  components: {\n    navBar\n  },\n  data() {\n    return {\n      activityId: null,\n      activityInfo: {},\n      goodsList: [],\n      countdown: null,\n      countdownTimer: null,\n      loading: true,\n      ht: 0 // 导航栏高度\n    }\n  },\n  computed: {\n    ...mapState(['token', 'userInfo'])\n  },\n  onLoad(options) {\n    if (options.activityId) {\n      this.activityId = options.activityId\n      this.loadActivityDetail()\n    }\n    this.getNavBarHeight()\n  },\n  onReady() {\n    this.startCountdown()\n  },\n  onUnload() {\n    this.clearCountdown()\n  },\n  methods: {\n    // 获取导航栏高度\n    getNavBarHeight() {\n      const systemInfo = uni.getSystemInfoSync()\n      this.ht = systemInfo.statusBarHeight + 44 // 状态栏高度 + 导航栏高度\n    },\n\n    // 加载活动详情\n    async loadActivityDetail() {\n      try {\n        this.loading = true\n        console.log('加载活动详情，活动ID:', this.activityId)\n        \n        // 这里应该有获取活动详情的API，暂时使用活动列表API的第一个\n        const activitiesRes = await getActiveSeckillActivities()\n        if (activitiesRes.code === 1 && activitiesRes.data && activitiesRes.data.length > 0) {\n          // 查找对应的活动\n          const activity = activitiesRes.data.find(item => item.id == this.activityId)\n          if (activity) {\n            this.activityInfo = activity\n            console.log('使用后端活动数据:', this.activityInfo)\n          } else {\n            console.log('未找到对应活动，使用第一个活动')\n            this.activityInfo = activitiesRes.data[0]\n          }\n        } else {\n          console.log('后端活动数据获取失败，没有活动数据')\n          this.activityInfo = {\n            name: '活动不存在',\n            description: '该活动不存在或已结束',\n            startTime: '',\n            endTime: ''\n          }\n        }\n\n        // 加载商品列表\n        await this.loadGoodsList()\n        \n        this.loading = false\n      } catch (error) {\n        console.error('加载活动详情失败:', error)\n        this.activityInfo = {\n          name: '加载失败',\n          description: '活动数据加载失败，请刷新重试',\n          startTime: '',\n          endTime: ''\n        }\n        await this.loadGoodsList()\n        this.loading = false\n      }\n    },\n\n\n\n    // 加载商品列表\n    async loadGoodsList() {\n      try {\n        console.log('加载商品列表，活动ID:', this.activityId)\n        const res = await getSeckillGoodsByActivityId(this.activityId)\n        console.log('商品列表API响应:', res)\n        \n        if (res.code === 1 && res.data && res.data.length > 0) {\n          this.goodsList = res.data\n          console.log('使用后端商品数据:', this.goodsList)\n        } else {\n          console.log('后端商品数据获取失败，没有商品数据')\n          this.goodsList = []\n        }\n      } catch (error) {\n        console.error('加载商品列表失败:', error)\n        console.log('API调用失败，没有商品数据')\n        this.goodsList = []\n      }\n    },\n\n\n\n    // 计算库存百分比\n    getStockPercentage(goods) {\n      const totalStock = goods.availableStock + goods.soldCount\n      return totalStock > 0 ? Math.round((goods.soldCount / totalStock) * 100) : 0\n    },\n\n    // 判断是否可以购买\n    canPurchase(goods) {\n      const now = new Date().getTime()\n      // 修复日期解析问题，将横线替换为斜线\n      const startTimeStr = this.activityInfo.startTime ? this.activityInfo.startTime.replace(/-/g, '/') : ''\n      const endTimeStr = this.activityInfo.endTime ? this.activityInfo.endTime.replace(/-/g, '/') : ''\n      const startTime = new Date(startTimeStr).getTime()\n      const endTime = new Date(endTimeStr).getTime()\n      \n      return now >= startTime && \n             now <= endTime && \n             goods.availableStock > 0 && \n             goods.userPurchased < goods.limitCount\n    },\n\n    // 获取购买按钮文本\n    getBuyButtonText(goods) {\n      const now = new Date().getTime()\n      // 修复日期解析问题，将横线替换为斜线\n      const startTimeStr = this.activityInfo.startTime ? this.activityInfo.startTime.replace(/-/g, '/') : ''\n      const endTimeStr = this.activityInfo.endTime ? this.activityInfo.endTime.replace(/-/g, '/') : ''\n      const startTime = new Date(startTimeStr).getTime()\n      const endTime = new Date(endTimeStr).getTime()\n      \n      if (now < startTime) {\n        return '未开始'\n      } else if (now > endTime) {\n        return '已结束'\n      } else if (goods.availableStock <= 0) {\n        return '已抢完'\n      } else if (goods.userPurchased >= goods.limitCount) {\n        return '已达限购'\n      } else {\n        return '立即抢购'\n      }\n    },\n\n    // 处理购买\n    async handlePurchase(goods) {\n      if (!this.canPurchase(goods)) {\n        return\n      }\n\n      try {\n        // 检查购买资格\n        const eligibilityRes = await checkSeckillEligibility({\n          seckillGoodsId: goods.id,\n          quantity: 1\n        })\n\n        if (eligibilityRes.code !== 1) {\n          uni.showToast({\n            title: eligibilityRes.msg || '无法购买',\n            icon: 'none'\n          })\n          return\n        }\n\n        // 跳转到商品详情页\n        this.goToGoodsDetail(goods)\n      } catch (error) {\n        console.error('检查购买资格失败:', error)\n        // 直接跳转到商品详情页\n        this.goToGoodsDetail(goods)\n      }\n    },\n\n    // 跳转到商品详情页\n    goToGoodsDetail(goods) {\n      uni.navigateTo({\n        url: `/pages/seckill/goods-detail/goods-detail?goodsId=${goods.id}`\n      })\n    },\n\n    // 计算倒计时\n    calculateCountdown() {\n      const now = new Date().getTime()\n      // 修复日期解析问题，将横线替换为斜线\n      const endTimeStr = this.activityInfo.endTime ? this.activityInfo.endTime.replace(/-/g, '/') : ''\n      const end = new Date(endTimeStr).getTime()\n      const diff = end - now\n\n      if (diff <= 0) {\n        return null\n      }\n\n      const hours = Math.floor(diff / (1000 * 60 * 60))\n      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))\n      const seconds = Math.floor((diff % (1000 * 60)) / 1000)\n\n      return { hours, minutes, seconds }\n    },\n\n    // 开始倒计时\n    startCountdown() {\n      this.countdown = this.calculateCountdown()\n      this.countdownTimer = setInterval(() => {\n        this.countdown = this.calculateCountdown()\n        if (!this.countdown) {\n          this.clearCountdown()\n          // 活动结束，刷新页面\n          this.loadActivityDetail()\n        }\n      }, 1000)\n    },\n\n    // 清除倒计时\n    clearCountdown() {\n      if (this.countdownTimer) {\n        clearInterval(this.countdownTimer)\n        this.countdownTimer = null\n      }\n    },\n\n    // 格式化时间\n    formatTime(timeStr) {\n      if (!timeStr) return ''\n      // 修复日期解析问题，将横线替换为斜线\n      const fixedTimeStr = timeStr.replace(/-/g, '/')\n      const date = new Date(fixedTimeStr)\n      const month = (date.getMonth() + 1).toString().padStart(2, '0')\n      const day = date.getDate().toString().padStart(2, '0')\n      const hour = date.getHours().toString().padStart(2, '0')\n      const minute = date.getMinutes().toString().padStart(2, '0')\n      return `${month}-${day} ${hour}:${minute}`\n    },\n\n    // 格式化时间单位\n    formatTimeUnit(time) {\n      return time < 10 ? `0${time}` : `${time}`\n    },\n\n    // 跳转个人中心\n    goToPersonalCenter() {\n      uni.navigateTo({\n        url: '/pages/my/my'\n      })\n    },\n\n    // 返回主页\n    goBack() {\n      uni.redirectTo({\n        url: '/pages/index/index'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.activity-detail-container {\n  width: 100%;\n  min-height: 100vh;\n  background: #f5f5f5;\n}\n\n.content {\n  width: 100%;\n  padding-bottom: 40rpx;\n}\n\n.activity-header {\n  position: relative;\n  width: 100%;\n  height: 400rpx;\n  overflow: hidden;\n}\n\n.activity-banner {\n  width: 100%;\n  height: 100%;\n}\n\n.activity-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 40rpx 30rpx;\n  box-sizing: border-box;\n  color: white;\n}\n\n.activity-info {\n  flex: 1;\n}\n\n.activity-title {\n  font-size: 48rpx;\n  font-weight: bold;\n  display: block;\n  margin-bottom: 20rpx;\n}\n\n.activity-desc {\n  font-size: 28rpx;\n  opacity: 0.9;\n  display: block;\n  margin-bottom: 30rpx;\n  line-height: 1.4;\n}\n\n.activity-time {\n  display: flex;\n  align-items: center;\n}\n\n.time-label {\n  font-size: 24rpx;\n  opacity: 0.8;\n}\n\n.time-range {\n  font-size: 24rpx;\n  margin-left: 10rpx;\n}\n\n.countdown-box {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 16rpx;\n  padding: 20rpx;\n}\n\n.countdown-label {\n  font-size: 24rpx;\n  margin-right: 20rpx;\n}\n\n.countdown-time {\n  display: flex;\n  align-items: center;\n}\n\n.time-item {\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 8rpx;\n  padding: 8rpx 12rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  min-width: 60rpx;\n  text-align: center;\n}\n\n.separator {\n  font-size: 28rpx;\n  font-weight: bold;\n  margin: 0 10rpx;\n}\n\n.goods-section {\n  margin-top: 20rpx;\n  background: white;\n  padding: 30rpx;\n}\n\n.section-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 30rpx;\n  padding-bottom: 20rpx;\n  border-bottom: 2rpx solid #f0f0f0;\n}\n\n.title-text {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.goods-count {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.goods-list {\n  display: flex;\n  flex-direction: column;\n  gap: 30rpx;\n}\n\n.goods-item {\n  display: flex;\n  align-items: center;\n  background: #f9f9f9;\n  border-radius: 16rpx;\n  padding: 20rpx;\n  position: relative;\n}\n\n.goods-image {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 12rpx;\n  margin-right: 20rpx;\n}\n\n.goods-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.goods-name {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.price-info {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.seckill-price {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #ff6b35;\n}\n\n.original-price {\n  font-size: 24rpx;\n  color: #999;\n  text-decoration: line-through;\n}\n\n.stock-info {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.stock-text {\n  font-size: 22rpx;\n  color: #666;\n}\n\n.progress-bar {\n  flex: 1;\n  height: 8rpx;\n  background: #f0f0f0;\n  border-radius: 4rpx;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: #ff6b35;\n  transition: width 0.3s ease;\n}\n\n.limit-info {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.limit-text, .sold-text {\n  font-size: 22rpx;\n  color: #666;\n}\n\n.goods-action {\n  display: flex;\n  align-items: center;\n}\n\n.buy-btn {\n  background: #ff6b35;\n  color: white;\n  font-size: 24rpx;\n  font-weight: bold;\n  padding: 16rpx 32rpx;\n  border-radius: 50rpx;\n  text-align: center;\n  min-width: 120rpx;\n  \n  &.disabled {\n    background: #ccc;\n    color: #999;\n  }\n}\n\n.empty-state, .loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100rpx 40rpx;\n}\n\n.empty-icon, .loading-icon {\n  width: 200rpx;\n  height: 200rpx;\n  margin-bottom: 30rpx;\n}\n\n.empty-text, .loading-text {\n  font-size: 28rpx;\n  color: #999;\n}\n\n.action-buttons-section {\n  background: white;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.personal-center-button,\n.back-button {\n  width: 300rpx;\n  height: 80rpx;\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12rpx;\n  transition: all 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n  }\n}\n\n.personal-center-button {\n  background: #ff6b35;\n  color: white;\n  border: 2rpx solid #ff6b35;\n  \n  &:active {\n    background: #e55a2b;\n  }\n}\n\n.back-button {\n  background: #f5f5f5;\n  color: #666;\n  border: 2rpx solid #ddd;\n  \n  &:active {\n    background: #e0e0e0;\n  }\n}\n\n.button-icon {\n  width: 32rpx;\n  height: 32rpx;\n}\n\n.button-text {\n  font-size: 28rpx;\n  font-weight: 500;\n}\n</style>\n","import mod from \"-!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity-detail.vue?vue&type=style&index=0&id=4dc51e74&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Environment/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activity-detail.vue?vue&type=style&index=0&id=4dc51e74&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755530191484\n      var cssReload = require(\"E:/Environment/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}